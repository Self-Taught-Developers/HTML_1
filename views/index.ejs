<!DOCTYPE html>
<html>

<head>
  <title>Express App</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
  </script>

  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 0;
    }

    #Refresh {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      background-color: #3498db;
      color: white;
      cursor: pointer;
    }

    #strengthChart {
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <button id="Refresh" onclick="window.location.href='/Refresh'">Refresh</button>

  <canvas id="myChart" style="width:100%;max-width:700px"></canvas>



  <!-- Injecting server-side data into a hidden HTML element -->
  <div id="testVar" style="display: none;">
    <%= JSON.stringify(testVar) %>
  </div>

  <script>
    // Extracting server-side data from the hidden HTML element
    var testVar = JSON.parse(document.getElementById('testVar').textContent);
    var dates = testVar.map(entry => entry.date);
    var strengths = testVar.map(entry => entry.strength);

    // Render the chart using Chart.js
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: dates,
        datasets: [{
          label: 'Strength',
          data: strengths,
          backgroundColor: 'rgba(54, 162, 235, 0.2)',
          borderColor: 'rgba(54, 162, 235, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true
            }
          }]
        }
      }
    });
  </script>

  </div>

</body>

</html>